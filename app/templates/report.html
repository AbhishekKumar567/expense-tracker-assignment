<!DOCTYPE html>
<html>
<body>

<h1>Grouped Monthly Report</h1>

{% for month_block in grouped %}
    <h2>Month: {{ month_block.period }}</h2>
    <h3>Total Spent: {{ month_block.total_spent }}</h3>

    <table border="1">
        <tr>
            <th>Category</th>
            <th>Budget</th>
            <th>Spent</th>
            <th>Remaining</th>
        </tr>

        {% for r in month_block.rows %}
        <tr>
            <td>{{ r.category }}</td>
            <td>{{ r.budget if r.budget else 'N/A' }}</td>
            <td>{{ r.spent }}</td>
            <td>
                {% if r.remaining is none %}
                    No Budget
                {% elif r.remaining < 0 %}
                    <span style="color:red">Exceeded!</span>
                {% else %}
                    {{ r.remaining }}
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    <hr>
{% endfor %}

<br><a href="/dashboard"><button>Back</button></a>

</body>
</html>
